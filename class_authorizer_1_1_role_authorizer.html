<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kalinka: Authorizer\RoleAuthorizer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kalinka
   </div>
   <div id="projectbrief">Flexible authorization library for PHP</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Authorizer</b></li><li class="navelem"><a class="el" href="class_authorizer_1_1_role_authorizer.html">RoleAuthorizer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_authorizer_1_1_role_authorizer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Authorizer\RoleAuthorizer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Authorizer that maps named roles to applicable policies.  
 <a href="class_authorizer_1_1_role_authorizer.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Authorizer\RoleAuthorizer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_authorizer_1_1_role_authorizer.png" usemap="#Authorizer\RoleAuthorizer_map" alt=""/>
  <map id="Authorizer\RoleAuthorizer_map" name="Authorizer\RoleAuthorizer_map">
<area href="class_authorizer_1_1_authorizer_abstract.html" title="Base class for Authorizer classes, which grant or deny access to resources." alt="Authorizer\AuthorizerAbstract" shape="rect" coords="0,0,181,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af5e6b3cf37b0ab5a62200a2838f46ba3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authorizer_1_1_role_authorizer.html#af5e6b3cf37b0ab5a62200a2838f46ba3">__construct</a> ($subject, $roles)</td></tr>
<tr class="memdesc:af5e6b3cf37b0ab5a62200a2838f46ba3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="class_authorizer_1_1_role_authorizer.html" title="Authorizer that maps named roles to applicable policies.">RoleAuthorizer</a>.  <a href="#af5e6b3cf37b0ab5a62200a2838f46ba3"></a><br/></td></tr>
<tr class="inherit_header pub_methods_class_authorizer_1_1_authorizer_abstract"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_authorizer_1_1_authorizer_abstract')"><img src="closed.png" alt="-"/>&nbsp;Public Member Functions inherited from <a class="el" href="class_authorizer_1_1_authorizer_abstract.html">Authorizer\AuthorizerAbstract</a></td></tr>
<tr class="memitem:ab75976d04cfdf315a980f980f462dfc3 inherit pub_methods_class_authorizer_1_1_authorizer_abstract"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authorizer_1_1_authorizer_abstract.html#ab75976d04cfdf315a980f980f462dfc3">__construct</a> ($subject=null)</td></tr>
<tr class="memdesc:ab75976d04cfdf315a980f980f462dfc3 inherit pub_methods_class_authorizer_1_1_authorizer_abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the authorizer with the given subject.  <a href="#ab75976d04cfdf315a980f980f462dfc3"></a><br/></td></tr>
<tr class="memitem:ac7f1d1bd8f2a2f0b8c568278bb8d52b8 inherit pub_methods_class_authorizer_1_1_authorizer_abstract"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authorizer_1_1_authorizer_abstract.html#ac7f1d1bd8f2a2f0b8c568278bb8d52b8">can</a> ($action, $resType, $guardObject=null)</td></tr>
<tr class="memdesc:ac7f1d1bd8f2a2f0b8c568278bb8d52b8 inherit pub_methods_class_authorizer_1_1_authorizer_abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decides if an action on a resource is permitted.  <a href="#ac7f1d1bd8f2a2f0b8c568278bb8d52b8"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ab3d09dd2ded81b29a9f72b698aa0d2b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authorizer_1_1_role_authorizer.html#ab3d09dd2ded81b29a9f72b698aa0d2b2">registerRolePolicies</a> ($rolePolicies)</td></tr>
<tr class="memdesc:ab3d09dd2ded81b29a9f72b698aa0d2b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associates roles with policy settings.  <a href="#ab3d09dd2ded81b29a9f72b698aa0d2b2"></a><br/></td></tr>
<tr class="memitem:a26ac23a20aace05b25b6439a191562a3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authorizer_1_1_role_authorizer.html#a26ac23a20aace05b25b6439a191562a3">registerRoleExclusions</a> ($roleExclusions)</td></tr>
<tr class="memdesc:a26ac23a20aace05b25b6439a191562a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specifies specific sub-parts of roles to ignore in access checks.  <a href="#a26ac23a20aace05b25b6439a191562a3"></a><br/></td></tr>
<tr class="memitem:a6f6a4f9f6d23b524d992ff4c93cd4e3d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authorizer_1_1_role_authorizer.html#a6f6a4f9f6d23b524d992ff4c93cd4e3d">registerRoleInclusions</a> ($roleInclusions)</td></tr>
<tr class="memdesc:a6f6a4f9f6d23b524d992ff4c93cd4e3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specifies specific sub-parts of roles to use in access checks.  <a href="#a6f6a4f9f6d23b524d992ff4c93cd4e3d"></a><br/></td></tr>
<tr class="memitem:a2f8dab8a697eefcd465158d0c74a4b87"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2f8dab8a697eefcd465158d0c74a4b87"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authorizer_1_1_role_authorizer.html#a2f8dab8a697eefcd465158d0c74a4b87">getPermission</a> ($action, $resType, $guard)</td></tr>
<tr class="memdesc:a2f8dab8a697eefcd465158d0c74a4b87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of abstract method from <a class="el" href="class_authorizer_1_1_authorizer_abstract.html" title="Base class for Authorizer classes, which grant or deny access to resources.">AuthorizerAbstract</a>. <br/></td></tr>
<tr class="memitem:aa9efe9f77b72ba9e7c210ccf239b4e5b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authorizer_1_1_role_authorizer.html#aa9efe9f77b72ba9e7c210ccf239b4e5b">getRolePermission</a> ($role, $action, $resType, $guard)</td></tr>
<tr class="memdesc:aa9efe9f77b72ba9e7c210ccf239b4e5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by getPermission to determine access checks under a given role.  <a href="#aa9efe9f77b72ba9e7c210ccf239b4e5b"></a><br/></td></tr>
<tr class="inherit_header pro_methods_class_authorizer_1_1_authorizer_abstract"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_authorizer_1_1_authorizer_abstract')"><img src="closed.png" alt="-"/>&nbsp;Protected Member Functions inherited from <a class="el" href="class_authorizer_1_1_authorizer_abstract.html">Authorizer\AuthorizerAbstract</a></td></tr>
<tr class="memitem:ad9c78522a66264ed0220d9baa9eedfba inherit pro_methods_class_authorizer_1_1_authorizer_abstract"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authorizer_1_1_authorizer_abstract.html#ad9c78522a66264ed0220d9baa9eedfba">registerGuards</a> ($guardsMap)</td></tr>
<tr class="memdesc:ad9c78522a66264ed0220d9baa9eedfba inherit pro_methods_class_authorizer_1_1_authorizer_abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associates resource types with Guard classes.  <a href="#ad9c78522a66264ed0220d9baa9eedfba"></a><br/></td></tr>
<tr class="memitem:aef5c0150c93d30ffb13fc3e323028c86 inherit pro_methods_class_authorizer_1_1_authorizer_abstract"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authorizer_1_1_authorizer_abstract.html#aef5c0150c93d30ffb13fc3e323028c86">registerActions</a> ($actionsMap)</td></tr>
<tr class="memdesc:aef5c0150c93d30ffb13fc3e323028c86 inherit pro_methods_class_authorizer_1_1_authorizer_abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associates each resource type with a list of actions.  <a href="#aef5c0150c93d30ffb13fc3e323028c86"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Authorizer that maps named roles to applicable policies. </p>
<p>To use this class effectively, derive your own subclass of it and call <a class="el" href="class_authorizer_1_1_role_authorizer.html#ab3d09dd2ded81b29a9f72b698aa0d2b2" title="Associates roles with policy settings.">registerRolePolicies()</a> in your subclass's constructor, in addition to the <a class="el" href="class_authorizer_1_1_authorizer_abstract.html#ad9c78522a66264ed0220d9baa9eedfba" title="Associates resource types with Guard classes.">registerGuards()</a> and <a class="el" href="class_authorizer_1_1_authorizer_abstract.html#aef5c0150c93d30ffb13fc3e323028c86" title="Associates each resource type with a list of actions.">registerActions()</a> methods supplied by <a class="el" href="class_authorizer_1_1_authorizer_abstract.html" title="Base class for Authorizer classes, which grant or deny access to resources.">AuthorizerAbstract</a>.</p>
<p>See the <a href="index.html#roles">"Roles" section in README.md</a> for examples. </p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af5e6b3cf37b0ab5a62200a2838f46ba3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Authorizer\RoleAuthorizer::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$subject</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$roles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="class_authorizer_1_1_role_authorizer.html" title="Authorizer that maps named roles to applicable policies.">RoleAuthorizer</a>. </p>
<p>This should be called from a derivative class's constructor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$roles</td><td>A list of roles (strings) that are held by the subject. </td></tr>
    <tr><td class="paramname">$subject</td><td>The subject passed as the first argument to all Guard instances constructed by <code><a class="el" href="class_authorizer_1_1_authorizer_abstract.html#ac7f1d1bd8f2a2f0b8c568278bb8d52b8" title="Decides if an action on a resource is permitted.">can()</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="aa9efe9f77b72ba9e7c210ccf239b4e5b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Authorizer\RoleAuthorizer::getRolePermission </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$resType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guard</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used by getPermission to determine access checks under a given role. </p>
<p>If you want to implement roles with unusual semantics (e.g. a superadmin role which always has access to everything), override this method. </p>

</div>
</div>
<a class="anchor" id="a26ac23a20aace05b25b6439a191562a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Authorizer\RoleAuthorizer::registerRoleExclusions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$roleExclusions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specifies specific sub-parts of roles to ignore in access checks. </p>
<p>You may exclude the policies for every action of a resource type in a particular role, or only for particular actions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$roleExclusions</td><td>An associative array mapping resource types to role names e.g. <code>"post" =&gt; "editor"</code>, or to arrays mapping particular actions to role names e.g. <code>"post" =&gt; ["write" =&gt; "editor", "read" =&gt; "guest"]</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6f6a4f9f6d23b524d992ff4c93cd4e3d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Authorizer\RoleAuthorizer::registerRoleInclusions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$roleInclusions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specifies specific sub-parts of roles to use in access checks. </p>
<p>These are considered as though they were additional roles, in that access will be permitted if the included policy lists allow access or if the regular role policy lists do so.</p>
<p>You may include the policies for every action of a resource type, or only for particular actions.</p>
<p>Inclusions take priority over exclusions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$roleInclusions</td><td>An associative array mapping resource types to role names e.g. <code>"post" =&gt; "editor"</code>, or to arrays mapping particular actions to role names e.g. <code>"post" =&gt; ["write" =&gt; "editor", "read" =&gt; "guest"]</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab3d09dd2ded81b29a9f72b698aa0d2b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Authorizer\RoleAuthorizer::registerRolePolicies </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$rolePolicies</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Associates roles with policy settings. </p>
<p>See <a href="index.html#roles">"Roles" section in README.md</a> for more details on the argument to this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$rolePolicies</td><td>A three-level associative array mapping roles, resource types, and actions to policy lists, e.g. <code>"contributor" =&gt; ["document" =&gt; ["read" =&gt; "allow", "write" =&gt; "owner"]]</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>AC/Kalinka/Authorizer/RoleAuthorizer.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 22 2013 15:49:43 for Kalinka by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
